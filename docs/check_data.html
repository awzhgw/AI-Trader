<!DOCTYPE html>
<html>

<head>
    <title>数据调试</title>
</head>

<body>
    <h1>正在检查数据加载...</h1>
    <pre id="output"></pre>
    <script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
    <script src="assets/js/config-loader.js"></script>
    <script src="assets/js/data-loader.js"></script>
    <script>
        async function test() {
            const output = document.getElementById('output');

            try {
                // Load config
                await window.configLoader.loadConfig();
                output.innerHTML += '配置已加载\n';

                // Create data loader
                const dataLoader = new DataLoader();
                output.innerHTML += '数据加载器已创建\n';

                // Load agent list
                const agents = await dataLoader.loadAgentList();
                output.innerHTML += `发现代理: ${JSON.stringify(agents)}\n`;

                // Try loading first agent
                if (agents.length > 0) {
                    output.innerHTML += `\n正在加载 ${agents[0]} 的数据...\n`;
                    const data = await dataLoader.loadAgentData(agents[0]);
                    output.innerHTML += `结果: ${JSON.stringify(data, null, 2)}\n`;
                }
            } catch (error) {
                output.innerHTML += `\n错误: ${error.message}\n${error.stack}\n`;
            }
        }

        test();
    </script>
</body>

</html>